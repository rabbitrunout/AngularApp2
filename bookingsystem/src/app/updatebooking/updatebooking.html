<div class="container mt-4">
  <h2 class="mb-4">Edit Reservation</h2>

  <!-- Notifications -->
  <div *ngIf="success" class="alert alert-success rounded-3">{{ success }}</div>
  <div *ngIf="error" class="alert alert-danger rounded-3">{{ error }}</div>

  <form #form="ngForm" (ngSubmit)="updateReservation(form)" class="card shadow-sm rounded-4 p-4 bg-light">
    <!-- Location -->
    <div class="mb-3">
      <label for="location" class="form-label fw-semibold">Location</label>
      <input
        type="text"
        id="location"
        name="location"
        class="form-control rounded-3"
        required
        [(ngModel)]="reservation.location"
      />
    </div>

    <!-- Start Time -->
    <div class="mb-3">
      <label for="start_time" class="form-label fw-semibold">Start Time</label>
      <input
        type="datetime-local"
        id="start_time"
        name="start_time"
        class="form-control rounded-3"
        required
        [(ngModel)]="reservation.start_time"
      />
    </div>

    <!-- End Time -->
    <div class="mb-3">
      <label for="end_time" class="form-label fw-semibold">End Time</label>
      <input
        type="datetime-local"
        id="end_time"
        name="end_time"
        class="form-control rounded-3"
        required
        [(ngModel)]="reservation.end_time"
      />
    </div>

    <!-- Completed? -->
    <div class="mb-3 form-check">
      <input
        type="checkbox"
        id="complete"
        name="complete"
        class="form-check-input"
        [(ngModel)]="reservation.complete"
      />
      <label for="complete" class="form-check-label fw-semibold">Completed</label>
    </div>

    <!-- Image -->
    <div class="mb-3">
      <label for="image" class="form-label fw-semibold">Image</label>
      <input
        type="file"
        id="image"
        name="image"
        class="form-control rounded-3"
        (change)="onFileSelected($event)"
        accept="image/*"
      />
    </div>

    <!-- Preview -->
    <div class="mb-3" *ngIf="previewUrl">
      <label class="form-label fw-semibold">Preview:</label><br />
      <img
        [src]="previewUrl"
        alt="Preview"
        class="img-thumbnail"
        style="max-width: 200px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1);"
      />
    </div>

    <!-- Buttons -->
    <div class="d-flex gap-3">
      <button
        type="submit"
        class="btn btn-primary rounded-pill px-4"
        [disabled]="form.invalid"
      >
        üíæ Save
      </button>
      <button
        type="button"
        class="btn btn-outline-secondary rounded-pill px-4"
        (click)="cancelUpdate()"
      >
        ‚Ü©Ô∏è Cancel
      </button>
    </div>
  </form>
</div>
